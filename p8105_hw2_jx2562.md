p8105_hw2_jx2562
================
Jingyi

``` r
library(tidyverse)
```

## Problem 1

In this problem, we aim to merge three data sets, *pols-month.csv*,
*unemployment.csv*, and *snp.csv* into one.

Clean the *pols-month.csv*.

``` r
pm_df =
  read_csv("data/pols-month.csv") |>
  separate(mon, into = c("year", "month", "day"), sep = "-") |>
  mutate(
    month = as.numeric(month),
    year = as.numeric(year))|>
  pivot_longer(
    cols = starts_with("prez"),
    names_to = "president",
    names_prefix = "prez_",
    values_to = "party") |>
  filter(party != 0) |>
  select(-c(party, day)) |>
  arrange(year,month) |>
  mutate(month = month.abb[month]) |>
  janitor::clean_names()

head(pm_df)
```

    ## # A tibble: 6 × 9
    ##    year month gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##   <dbl> <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ## 1  1947 Jan        23      51     253      23      45     198 dem      
    ## 2  1947 Feb        23      51     253      23      45     198 dem      
    ## 3  1947 Mar        23      51     253      23      45     198 dem      
    ## 4  1947 Apr        23      51     253      23      45     198 dem      
    ## 5  1947 May        23      51     253      23      45     198 dem      
    ## 6  1947 Jun        23      51     253      23      45     198 dem

Clean the *snp.csv* with the similar process as above. Mainly focus on
the representation of date.

``` r
snp_df =
  read_csv("data/snp.csv") |>
  separate(date, into = c("month", "day", "year"), sep = "/") |>
  mutate(
    month = as.numeric(month),
    year = as.numeric(year),
    year = ifelse(year > 25, 1900 + year, 2000 + year)) |>
  select(year, month, close) |>
  arrange(year,month) |>
  mutate(month = month.abb[month]) |>
  janitor::clean_names()

head(snp_df)
```

    ## # A tibble: 6 × 3
    ##    year month close
    ##   <dbl> <chr> <dbl>
    ## 1  1950 Jan    17.0
    ## 2  1950 Feb    17.2
    ## 3  1950 Mar    17.3
    ## 4  1950 Apr    18.0
    ## 5  1950 May    18.8
    ## 6  1950 Jun    17.7

Clean the *unemployment.csv* so that it could fit in the previous two
datasets.

``` r
uep_df =
  read_csv("data/unemployment.csv") |>
  pivot_longer(
    cols = Jan:Dec,
    names_to = "month",
    values_to = "unemployment"
  ) |>
  janitor::clean_names()

head(uep_df)
```

    ## # A tibble: 6 × 3
    ##    year month unemployment
    ##   <dbl> <chr>        <dbl>
    ## 1  1948 Jan            3.4
    ## 2  1948 Feb            3.8
    ## 3  1948 Mar            4  
    ## 4  1948 Apr            3.9
    ## 5  1948 May            3.5
    ## 6  1948 Jun            3.6

Here the three data frames are all lead by year and month with a correct
order. Next, we merge the three data frames together.

``` r
merge_df = pm_df |>
  full_join(snp_df) |>
  full_join(uep_df)

head(merge_df)
```

    ## # A tibble: 6 × 11
    ##    year month gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president close
    ##   <dbl> <chr>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     <dbl>
    ## 1  1947 Jan        23      51     253      23      45     198 dem          NA
    ## 2  1947 Feb        23      51     253      23      45     198 dem          NA
    ## 3  1947 Mar        23      51     253      23      45     198 dem          NA
    ## 4  1947 Apr        23      51     253      23      45     198 dem          NA
    ## 5  1947 May        23      51     253      23      45     198 dem          NA
    ## 6  1947 Jun        23      51     253      23      45     198 dem          NA
    ## # ℹ 1 more variable: unemployment <dbl>

The **merge_df** is combined by the three data frames, **pm_df**,
**snp_df**, and **uep_df**, by full_join(). In this way, all values in
the three data frames are kept. The merged data frame has *11* columns
and *828* rows. It has the variables **year, month, gov_gop, sen_gop,
rep_gop, gov_dem, sen_dem, rep_dem, president, close, unemployment**.
The recorded time of the data ranges from *1947-Jan* to *2015-Dec*.

The **pm_df** has *9* columns and *822* rows related to the number of
national politicians who are democratic or republican at any given time.
It contains variables **year, month, gov_gop, sen_gop, rep_gop, gov_dem,
sen_dem, rep_dem, president**. And the time ranges from *1947-Jan* to
*2015-Jun*.

The **snp_df** has *3* columns and *787* rows related to Standard &
Poor’s stock market index (S&P), often used as a representative measure
of stock market as a whole. It contains variables **year, month,
close**. And the time ranges from *1950-Jan* to *2015-Jul*.

The **uep_df** has *3* columns and *816* rows related the unemployment
rate at a given time. It contains variables **year, month,
unemployment**. And the time ranges from *1948-Jan* to *2015-Dec*.
